{% extends "base.html" %}

{% block title %}Ajouter une Voiture{% endblock %}

{% block content %}
<h2>Ajouter une Voiture</h2>

<form action="/car/add" method="POST">
    <div class="form-group">
        <label for="model">Modèle du véhicule</label>
        <select class="form-control" id="model_select" name="model">
            <option value="">-- Sélectionner un modèle --</option>
            {% for m in models %}
                <option value="{{ m.model }}">{{ m.model }}</option>
            {% endfor %}
            <option value="autre">Autre...</option>
        </select>
        <input type="text" class="form-control mt-2" id="model_input" name="model_custom" placeholder="Entrer un nouveau modèle" style="display:none;">
    </div>
    <div class="form-group">
        <label for="name">Nom du véhicule</label>
        <input type="text" class="form-control" id="name" name="name" required>
    </div>
    <div class="form-group">
        <label for="car_type">Type de voiture</label>
        <input type="text" class="form-control" id="car_type" name="car_type" required>
    </div>
    <div class="form-group">
        <label for="brand">Marque</label>
        <input type="text" class="form-control" id="brand" name="brand" required>
    </div>
    <div class="form-group">
        <label for="license_plate">Plaque d'immatriculation</label>
        <input type="text" class="form-control" id="license_plate" name="license_plate" required>
    </div>
    <div class="form-group">
        <label for="average_cost_per_day">Coût moyen par jour (MAD)</label>
        <input type="number" class="form-control" id="average_cost_per_day" name="average_cost_per_day" required>
    </div>
    <div class="form-group">
        <label for="available_count">Nombre disponible</label>
        <input type="number" class="form-control" id="available_count" name="available_count" required>
    </div>
    <button type="submit" class="btn btn-primary">Ajouter</button>
</form>

<script>
    const modelSelect = document.getElementById('model_select');
    const modelInput = document.getElementById('model_input');
    modelSelect.addEventListener('change', function() {
        if (this.value === 'autre') {
            modelInput.style.display = 'block';
            modelInput.required = true;
        } else {
            modelInput.style.display = 'none';
            modelInput.required = false;
        }
    });
</script>
{% endblock %}
